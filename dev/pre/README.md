# Appraise job preparation

## prepare_one_2.py

Takes two files: a reference text file, a hint text file, and produces an XML results file.
In this project, both the reference and the hint text are a single sentence.

One can set the percentage of gaps (e.g.  --percentage 20 for 20%), the source language (--sl), the target language (--tl) which will be used to label the XML file.

If a KenLM language model is available, holes are punched where the entropy is maximum; otherwise, they are randomly punched (selecting --no_entropy).

If a list of stopwords is available for the language in question from package stop_words, then holes are never punched where stopwords are. 

The switch --adjacent_gaps_not_ok avoids punching gaps which are adjacents or just separated by stopwords.

The switch --system labels the system used.

If the target language (--tl) is English, the gensim package is used to obtain a one-sentence summary

[Change usage as it may be wrong for the Kazakh project]


```
usage: prepare_one_2.py [-h] [--percentage PERCENTAGE]
                        [--raw-model RAWMODELFILENAME]
                        [--binary-model BINARYMODELFILENAME] [-v]
                        [--include_stopwords] [--include_punctuation]
                        [--no_hint] [--setid SETID] [--docid DOCID] [--sl SL]
                        [--tl TL] [--system SYSTEM] [--no_entropy]
                        [--no_context] [--adjacent_gaps_not_ok]
                        reftextfile hinttextfile resultfile

``` 

## wrapper.py

[I have to modify this code so that it actually works for Kazakh etc.]

## merger.py 

Concatenates a series of XML tasks generated by prepare_one_2.py into a single XML file (specified by --output) by wrapping it in <set...>/</set>, ready to be ingested by Appraise. The job may be given a set identifier (--setid).

XML files concatenated should each one contain a single segment (as generated by prepare_one_2.py).

usage: 

```
merger.py [-h] [--setid SETID] [--outfile OUTFILE]
                 mergefile [mergefile ...]

positional arguments:
  mergefile          files to merge

optional arguments:
  -h, --help         show this help message and exit
  --setid SETID      New set identifier
  --outfile OUTFILE  Output file
```
